***************
*** 57,62 ****
  
  /* Idle State Flags */
  #define CPUIDLE_FLAG_TIME_VALID	(0x01) /* is residency time measurable? */
  
  #define CPUIDLE_DRIVER_FLAGS_MASK (0xFFFF0000)
  
--- 58,64 ----
  
  /* Idle State Flags */
  #define CPUIDLE_FLAG_TIME_VALID	(0x01) /* is residency time measurable? */
+ #define CPUIDLE_FLAG_COUPLED	(0x02) /* state applies to multiple cpus */
  
  #define CPUIDLE_DRIVER_FLAGS_MASK (0xFFFF0000)
  
***************
*** 100,105 ****
  	struct list_head 	device_list;
  	struct kobject		kobj;
  	struct completion	kobj_unregister;
  };
  
  DECLARE_PER_CPU(struct cpuidle_device *, cpuidle_devices);
--- 102,113 ----
  	struct list_head 	device_list;
  	struct kobject		kobj;
  	struct completion	kobj_unregister;
+ 
+ #ifdef CONFIG_ARCH_NEEDS_CPU_IDLE_COUPLED
+ 	int			safe_state_index;
+ 	cpumask_t		coupled_cpus;
+ 	struct cpuidle_coupled	*coupled;
+ #endif
  };
  
  DECLARE_PER_CPU(struct cpuidle_device *, cpuidle_devices);
