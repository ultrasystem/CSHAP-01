***************
*** 769,774 ****
  	dbg("pid: %d, state: 0x%lx, refcnt= %d",
  		task_pid_nr(current), fimc->state, fimc->m2m.refcnt);
  
  	v4l2_m2m_ctx_release(ctx->m2m_ctx);
  	fimc_ctrls_delete(ctx);
  	v4l2_fh_del(&ctx->fh);
--- 782,790 ----
  	dbg("pid: %d, state: 0x%lx, refcnt= %d",
  		task_pid_nr(current), fimc->state, fimc->m2m.refcnt);
  
+ 	if (mutex_lock_interruptible(&fimc->lock))
+ 		return -ERESTARTSYS;
+ 
  	v4l2_m2m_ctx_release(ctx->m2m_ctx);
  	fimc_ctrls_delete(ctx);
  	v4l2_fh_del(&ctx->fh);
