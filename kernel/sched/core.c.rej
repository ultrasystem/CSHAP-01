***************
*** 7404,7410 ****
  	static unsigned long prev_jiffy;	/* ratelimiting */
  
  	rcu_sleep_check(); /* WARN_ON_ONCE() by default, no rate limit reqd. */
- 	if ((preempt_count_equals(preempt_offset) && !irqs_disabled()) ||
  	    system_state != SYSTEM_RUNNING || oops_in_progress)
  		return;
  	if (time_before(jiffies, prev_jiffy + HZ) && prev_jiffy)
--- 7747,7754 ----
  	static unsigned long prev_jiffy;	/* ratelimiting */
  
  	rcu_sleep_check(); /* WARN_ON_ONCE() by default, no rate limit reqd. */
+ 	if ((preempt_count_equals(preempt_offset) && !irqs_disabled() &&
+ 	     !is_idle_task(current)) ||
  	    system_state != SYSTEM_RUNNING || oops_in_progress)
  		return;
  	if (time_before(jiffies, prev_jiffy + HZ) && prev_jiffy)
